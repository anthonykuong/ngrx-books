(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"+Zn1":function(t,e,n){"use strict";n.r(e);var o={};n.r(o),n.d(o,"loadBook",(function(){return m}));var r={};n.r(r),n.d(r,"searchSuccess",(function(){return g})),n.d(r,"searchFailure",(function(){return O}));var i={};n.r(i),n.d(i,"addBookSuccess",(function(){return k})),n.d(i,"addBookFailure",(function(){return v})),n.d(i,"removeBookSuccess",(function(){return j})),n.d(i,"removeBookFailure",(function(){return y})),n.d(i,"loadBooksSuccess",(function(){return B})),n.d(i,"loadBooksFailure",(function(){return w}));var c={};n.r(c),n.d(c,"enter",(function(){return C}));var a={};n.r(a),n.d(a,"searchBooks",(function(){return I}));var u={};n.r(u),n.d(u,"addBook",(function(){return x})),n.d(u,"removeBook",(function(){return P}));var s={};n.r(s),n.d(s,"selectBook",(function(){return S}));var b=n("Valr"),l=n("IvYz"),f=n("eeLN"),d=n("DUip"),p=n("bUQ0"),h=n("/2dQ"),m=Object(h.a)("[Book Exists Guard] Load Book",Object(h.b)()),g=Object(h.a)("[Books/API] Search Success",Object(h.b)()),O=Object(h.a)("[Books/API] Search Failure",Object(h.b)()),k=Object(h.a)("[Collection/API] Add Book Success",Object(h.b)()),v=Object(h.a)("[Collection/API] Add Book Failure",Object(h.b)()),j=Object(h.a)("[Collection/API] Remove Book Success",Object(h.b)()),y=Object(h.a)("[Collection/API] Remove Book Failure",Object(h.b)()),B=Object(h.a)("[Collection/API] Load Books Success",Object(h.b)()),w=Object(h.a)("[Collection/API] Load Books Failure",Object(h.b)()),C=Object(h.a)("[Collection Page] Enter"),I=Object(h.a)("[Find Book Page] Search Books",Object(h.b)()),x=Object(h.a)("[Selected Book Page] Add Book",Object(h.b)()),P=Object(h.a)("[Selected Book Page] Remove Book",Object(h.b)()),S=Object(h.a)("[View Book Page] Select Book",Object(h.b)()),M=n("kNOE"),A=n("wvrL"),R=n("mrSG"),F=n("ndpj"),N=Object(F.a)({ids:[],loading:!1,error:"",query:""},Object(F.b)(a.searchBooks,(function(t,e){var n=e.query;return""===n?{ids:[],loading:!1,error:"",query:n}:Object(R.a)(Object(R.a)({},t),{loading:!0,error:"",query:n})})),Object(F.b)(r.searchSuccess,(function(t,e){return{ids:e.books.map((function(t){return t.id})),loading:!1,error:"",query:t.query}})),Object(F.b)(r.searchFailure,(function(t,e){var n=e.errorMsg;return Object(R.a)(Object(R.a)({},t),{loading:!1,error:n})}))),Q=function(t){return t[t.EntitiesOnly=0]="EntitiesOnly",t[t.Both=1]="Both",t[t.None=2]="None",t}({});function _(t){return function(e,n){var o={ids:Object(R.d)(n.ids),entities:Object(R.a)({},n.entities)},r=t(e,o);return r===Q.Both?Object.assign({},n,o):r===Q.EntitiesOnly?Object(R.a)(Object(R.a)({},n),{entities:o.entities}):n}}var $=n("TYT/");function E(t,e){var n=e(t);return Object($.V)()&&void 0===n&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",t,"The `selectId` implementation:",e.toString()),n}function T(t){function e(e,n){var o=E(e,t);return o in n.entities?Q.None:(n.ids.push(o),n.entities[o]=e,Q.Both)}function n(t,n){var o,r,i=!1;try{for(var c=Object(R.e)(t),a=c.next();!a.done;a=c.next())i=e(a.value,n)!==Q.None||i}catch(u){o={error:u}}finally{try{a&&!a.done&&(r=c.return)&&r.call(c)}finally{if(o)throw o.error}}return i?Q.Both:Q.None}function o(t,e){return e.ids=[],e.entities={},n(t,e),Q.Both}function r(t,e){var n=(t instanceof Array?t:e.ids.filter((function(n){return t(e.entities[n])}))).filter((function(t){return t in e.entities})).map((function(t){return delete e.entities[t]})).length>0;return n&&(e.ids=e.ids.filter((function(t){return t in e.entities}))),n?Q.Both:Q.None}function i(e,n){var o={};return(e=e.filter((function(t){return t.id in n.entities}))).length>0?e.filter((function(e){return function(e,n,o){var r=Object.assign({},o.entities[n.id],n.changes),i=E(r,t),c=i!==n.id;return c&&(e[n.id]=i,delete o.entities[n.id]),o.entities[i]=r,c}(o,e,n)})).length>0?(n.ids=n.ids.map((function(t){return o[t]||t})),Q.Both):Q.EntitiesOnly:Q.None}function c(e,o){var r,c,a=[],u=[];try{for(var s=Object(R.e)(e),b=s.next();!b.done;b=s.next()){var l=b.value,f=E(l,t);f in o.entities?u.push({id:f,changes:l}):a.push(l)}}catch(h){r={error:h}}finally{try{b&&!b.done&&(c=s.return)&&c.call(s)}finally{if(r)throw r.error}}var d=i(u,o),p=n(a,o);switch(!0){case p===Q.None&&d===Q.None:return Q.None;case p===Q.Both||d===Q.Both:return Q.Both;default:return Q.EntitiesOnly}}return{removeAll:function(t){return Object.assign({},t,{ids:[],entities:{}})},addOne:_(e),addMany:_(n),addAll:_(o),setAll:_(o),setOne:_((function(e,n){var o=E(e,t);return o in n.entities?(n.entities[o]=e,Q.EntitiesOnly):(n.ids.push(o),n.entities[o]=e,Q.Both)})),updateOne:_((function(t,e){return i([t],e)})),updateMany:_(i),upsertOne:_((function(t,e){return c([t],e)})),upsertMany:_(c),removeOne:_((function(t,e){return r([t],e)})),removeMany:_(r),map:_((function(t,e){return i(e.ids.reduce((function(n,o){var r=t(e.entities[o]);return r!==e.entities[o]&&n.push({id:o,changes:r}),n}),[]).filter((function(t){return t.id in e.entities})),e)}))}}var q=function(t){void 0===t&&(t={});var e=Object(R.a)({sortComparer:!1,selectId:function(t){return t.id}},t),n=e.selectId,o=e.sortComparer,r={getInitialState:function(t){return void 0===t&&(t={}),Object.assign({ids:[],entities:{}},t)}},i={getSelectors:function(t){var e=function(t){return t.ids},n=function(t){return t.entities},o=Object(A.b)(e,n,(function(t,e){return t.map((function(t){return e[t]}))})),r=Object(A.b)(e,(function(t){return t.length}));return t?{selectIds:Object(A.b)(t,e),selectEntities:Object(A.b)(t,n),selectAll:Object(A.b)(t,o),selectTotal:Object(A.b)(t,r)}:{selectIds:e,selectEntities:n,selectAll:o,selectTotal:r}}},c=o?function(t,e){var n=T(t);function o(t,e){return r([t],e)}function r(e,n){var o=e.filter((function(e){return!(E(e,t)in n.entities)}));return 0===o.length?Q.None:(u(o,n),Q.Both)}function i(t,e){return e.entities={},e.ids=[],r(t,e),Q.Both}function c(e,n){var o=[],r=e.filter((function(e){return function(e,n,o){if(!(n.id in o.entities))return!1;var r=Object.assign({},o.entities[n.id],n.changes),i=E(r,t);return delete o.entities[n.id],e.push(r),i!==n.id}(o,e,n)})).length>0;if(0===o.length)return Q.None;var i=n.ids,c=[];return n.ids=n.ids.filter((function(t,e){return t in n.entities||(c.push(e),!1)})),u(o,n),!r&&c.every((function(t){return n.ids[t]===i[t]}))?Q.EntitiesOnly:Q.Both}function a(e,n){var o,i,a=[],u=[];try{for(var s=Object(R.e)(e),b=s.next();!b.done;b=s.next()){var l=b.value,f=E(l,t);f in n.entities?u.push({id:f,changes:l}):a.push(l)}}catch(h){o={error:h}}finally{try{b&&!b.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}var d=c(u,n),p=r(a,n);switch(!0){case p===Q.None&&d===Q.None:return Q.None;case p===Q.Both||d===Q.Both:return Q.Both;default:return Q.EntitiesOnly}}function u(n,o){n.sort(e);for(var r=[],i=0,c=0;i<n.length&&c<o.ids.length;){var a=n[i],u=E(a,t),s=o.ids[c];e(a,o.entities[s])<=0?(r.push(u),i++):(r.push(s),c++)}o.ids=r.concat(i<n.length?n.slice(i).map(t):o.ids.slice(c)),n.forEach((function(e,n){o.entities[t(e)]=e}))}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:_(o),updateOne:_((function(t,e){return c([t],e)})),upsertOne:_((function(t,e){return a([t],e)})),addAll:_(i),setAll:_(i),setOne:_((function(e,n){var r=E(e,t);return r in n.entities?(n.ids=n.ids.filter((function(t){return t!==r})),u([e],n),Q.Both):o(e,n)})),addMany:_(r),updateMany:_(c),upsertMany:_(a),map:_((function(t,e){return c(e.ids.reduce((function(n,o){var r=t(e.entities[o]);return r!==e.entities[o]&&n.push({id:o,changes:r}),n}),[]),e)}))}}(n,o):T(n);return Object(R.a)(Object(R.a)(Object(R.a)({selectId:n,sortComparer:o},r),i),c)}({selectId:function(t){return t.id},sortComparer:!1}),G=q.getInitialState({selectedBookId:null}),L=Object(F.a)(G,Object(F.b)(r.searchSuccess,i.loadBooksSuccess,(function(t,e){return q.addMany(e.books,t)})),Object(F.b)(o.loadBook,(function(t,e){return q.addOne(e.book,t)})),Object(F.b)(s.selectBook,(function(t,e){var n=e.id;return Object(R.a)(Object(R.a)({},t),{selectedBookId:n})}))),V=Object(F.a)({loaded:!1,loading:!1,ids:[]},Object(F.b)(c.enter,(function(t){return Object(R.a)(Object(R.a)({},t),{loading:!0})})),Object(F.b)(i.loadBooksSuccess,(function(t,e){return{loaded:!0,loading:!1,ids:e.books.map((function(t){return t.id}))}})),Object(F.b)(u.addBook,i.removeBookFailure,(function(t,e){var n=e.book;return t.ids.indexOf(n.id)>-1?t:Object(R.a)(Object(R.a)({},t),{ids:Object(R.d)(t.ids,[n.id])})})),Object(F.b)(u.removeBook,i.addBookFailure,(function(t,e){var n=e.book;return Object(R.a)(Object(R.a)({},t),{ids:t.ids.filter((function(t){return t!==n.id}))})})));function J(t,e){var n;return Object(M.a)(((n={}).search=N,n.books=L,n.collection=V,n))(t,e)}var D=Object(A.a)("books"),Z=Object(A.b)(D,(function(t){return t.books})),K=Object(A.b)(Z,(function(t){return t.selectedBookId})),z=q.getSelectors(Z).selectEntities,H=Object(A.b)(z,K,(function(t,e){return e&&t[e]})),Y=Object(A.b)(D,(function(t){return t.search})),U=Object(A.b)(Y,(function(t){return t.ids})),W=Object(A.b)(Y,(function(t){return t.query})),X=Object(A.b)(Y,(function(t){return t.loading})),tt=Object(A.b)(Y,(function(t){return t.error})),et=Object(A.b)(z,U,(function(t,e){return e.map((function(e){return t[e]})).filter((function(t){return null!=t}))})),nt=Object(A.b)(D,(function(t){return t.collection})),ot=Object(A.b)(nt,(function(t){return t.loaded})),rt=(Object(A.b)(nt,(function(t){return t.loading})),Object(A.b)(nt,(function(t){return t.ids}))),it=Object(A.b)(z,rt,(function(t,e){return e.map((function(e){return t[e]})).filter((function(t){return null!=t}))})),ct=Object(A.b)(rt,K,(function(t,e){return!!e&&t.indexOf(e)>-1})),at=n("17Os"),ut=n("+0bg"),st=function(){function t(){}return t.prototype.transform=function(t){if(!t)return"Author Unknown";switch(t.length){case 0:return"Author Unknown";case 1:return t[0];case 2:return t.join(" and ");default:var e=t[t.length-1];return t.slice(0,-1).join(", ")+", and "+e}},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=$.Lb({name:"bcAddCommas",type:t,pure:!0}),t}(),bt=function(){function t(){}return Object.defineProperty(t.prototype,"authors",{get:function(){return this.book.volumeInfo.authors},enumerable:!0,configurable:!0}),t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=$.Gb({type:t,selectors:[["bc-book-authors"]],inputs:{book:"book"},decls:5,vars:3,consts:[["mat-subheader",""]],template:function(t,e){1&t&&($.Rb(0,"h5",0),$.vc(1,"Written By:"),$.Qb(),$.Rb(2,"span"),$.vc(3),$.dc(4,"bcAddCommas"),$.Qb()),2&t&&($.Bb(3),$.xc(" ",$.ec(4,1,e.authors)," "))},directives:[ut.g],pipes:[st],styles:["h5[_ngcontent-%COMP%] {\n        margin-bottom: 5px;\n      }"]}),t}();function lt(t,e){if(1&t&&($.Rb(0,"mat-card-subtitle"),$.vc(1),$.Qb()),2&t){var n=$.cc(2);$.Bb(1),$.wc(n.subtitle)}}function ft(t,e){if(1&t&&$.Nb(0,"img",8),2&t){var n=$.cc(2);$.ic("src",n.thumbnail,$.oc)}}function dt(t,e){if(1&t){var n=$.Sb();$.Rb(0,"button",9),$.Zb("click",(function(){$.mc(n);var t=$.cc(2);return t.remove.emit(t.book)})),$.vc(1," Remove Book from Collection "),$.Qb()}}function pt(t,e){if(1&t){var n=$.Sb();$.Rb(0,"button",10),$.Zb("click",(function(){$.mc(n);var t=$.cc(2);return t.add.emit(t.book)})),$.vc(1," Add Book to Collection "),$.Qb()}}function ht(t,e){if(1&t&&($.Rb(0,"mat-card"),$.Rb(1,"mat-card-title-group"),$.Rb(2,"mat-card-title"),$.vc(3),$.Qb(),$.uc(4,lt,2,1,"mat-card-subtitle",0),$.uc(5,ft,1,1,"img",1),$.Qb(),$.Rb(6,"mat-card-content"),$.Nb(7,"p",2),$.Qb(),$.Rb(8,"mat-card-footer",3),$.Nb(9,"bc-book-authors",4),$.Qb(),$.Rb(10,"mat-card-actions",5),$.uc(11,dt,2,0,"button",6),$.uc(12,pt,2,0,"button",7),$.Qb(),$.Qb()),2&t){var n=$.cc();$.Bb(3),$.wc(n.title),$.Bb(1),$.ic("ngIf",n.subtitle),$.Bb(1),$.ic("ngIf",n.thumbnail),$.Bb(2),$.ic("innerHtml",n.description,$.nc),$.Bb(2),$.ic("book",n.book),$.Bb(2),$.ic("ngIf",n.inCollection),$.Bb(1),$.ic("ngIf",!n.inCollection)}}var mt=function(){function t(){this.add=new $.n,this.remove=new $.n}return Object.defineProperty(t.prototype,"id",{get:function(){return this.book.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.book.volumeInfo.title},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitle",{get:function(){return this.book.volumeInfo.subtitle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.book.volumeInfo.description},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thumbnail",{get:function(){return this.book.volumeInfo.imageLinks&&this.book.volumeInfo.imageLinks.smallThumbnail&&this.book.volumeInfo.imageLinks.smallThumbnail.replace("http:","")},enumerable:!0,configurable:!0}),t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=$.Gb({type:t,selectors:[["bc-book-detail"]],inputs:{book:"book",inCollection:"inCollection"},outputs:{add:"add",remove:"remove"},decls:1,vars:1,consts:[[4,"ngIf"],["mat-card-sm-image","",3,"src",4,"ngIf"],[3,"innerHtml"],[1,"footer"],[3,"book"],["align","start"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-card-sm-image","",3,"src"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){1&t&&$.uc(0,ht,13,7,"mat-card",0),2&t&&$.ic("ngIf",e.book)},styles:["[_nghost-%COMP%] {\n        display: flex;\n        justify-content: center;\n        margin: 75px 0;\n      }\n      mat-card[_ngcontent-%COMP%] {\n        max-width: 600px;\n      }\n      mat-card-title-group[_ngcontent-%COMP%] {\n        margin-left: 0;\n      }\n      img[_ngcontent-%COMP%] {\n        width: 60px;\n        min-width: 60px;\n        margin-left: 5px;\n      }\n      mat-card-content[_ngcontent-%COMP%] {\n        margin: 15px 0 50px;\n      }\n      mat-card-actions[_ngcontent-%COMP%] {\n        margin: 25px 0 0 !important;\n      }\n      mat-card-footer[_ngcontent-%COMP%] {\n        padding: 0 25px 25px;\n        position: relative;\n      }"]}),t}();function gt(t,e){if(1&t&&$.Nb(0,"img",4),2&t){var n=$.cc();$.ic("src",n.thumbnail,$.oc)}}function Ot(t,e){if(1&t&&($.Rb(0,"mat-card-subtitle"),$.vc(1),$.dc(2,"bcEllipsis"),$.Qb()),2&t){var n=$.cc();$.Bb(1),$.wc($.fc(2,1,n.subtitle,40))}}function kt(t,e){if(1&t&&($.Rb(0,"p"),$.vc(1),$.dc(2,"bcEllipsis"),$.Qb()),2&t){var n=$.cc();$.Bb(1),$.wc($.ec(2,1,n.description))}}var vt=function(t){return["/books",t]},jt=function(){function t(){}return Object.defineProperty(t.prototype,"id",{get:function(){return this.book.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.book.volumeInfo.title},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitle",{get:function(){return this.book.volumeInfo.subtitle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.book.volumeInfo.description},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thumbnail",{get:function(){return!!this.book.volumeInfo.imageLinks&&this.book.volumeInfo.imageLinks.smallThumbnail.replace("http:","")},enumerable:!0,configurable:!0}),t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=$.Gb({type:t,selectors:[["bc-book-preview"]],inputs:{book:"book"},decls:12,vars:11,consts:[[3,"routerLink"],["mat-card-sm-image","",3,"src",4,"ngIf"],[4,"ngIf"],[3,"book"],["mat-card-sm-image","",3,"src"]],template:function(t,e){1&t&&($.Rb(0,"a",0),$.Rb(1,"mat-card"),$.Rb(2,"mat-card-title-group"),$.uc(3,gt,1,1,"img",1),$.Rb(4,"mat-card-title"),$.vc(5),$.dc(6,"bcEllipsis"),$.Qb(),$.uc(7,Ot,3,4,"mat-card-subtitle",2),$.Qb(),$.Rb(8,"mat-card-content"),$.uc(9,kt,3,3,"p",2),$.Qb(),$.Rb(10,"mat-card-footer"),$.Nb(11,"bc-book-authors",3),$.Qb(),$.Qb(),$.Qb()),2&t&&($.ic("routerLink",$.jc(9,vt,e.id)),$.Bb(3),$.ic("ngIf",e.thumbnail),$.Bb(2),$.wc($.fc(6,6,e.title,35)),$.Bb(2),$.ic("ngIf",e.subtitle),$.Bb(2),$.ic("ngIf",e.description),$.Bb(2),$.ic("book",e.book))},styles:["[_nghost-%COMP%] {\n        display: flex;\n      }\n\n      [_nghost-%COMP%]   a[_ngcontent-%COMP%] {\n        display: flex;\n      }\n\n      mat-card[_ngcontent-%COMP%] {\n        width: 400px;\n        margin: 15px;\n        display: flex;\n        flex-flow: column;\n        justify-content: space-between;\n      }\n\n      @media only screen and (max-width: 768px) {\n        mat-card[_ngcontent-%COMP%] {\n          margin: 15px 0 !important;\n        }\n      }\n      mat-card[_ngcontent-%COMP%]:hover {\n        box-shadow: 3px 3px 16px -2px rgba(0, 0, 0, 0.5);\n      }\n      mat-card-title[_ngcontent-%COMP%] {\n        margin-right: 10px;\n      }\n      mat-card-title-group[_ngcontent-%COMP%] {\n        margin: 0;\n      }\n      a[_ngcontent-%COMP%] {\n        color: inherit;\n        text-decoration: none;\n      }\n      img[_ngcontent-%COMP%] {\n        width: 60px;\n        min-width: 60px;\n        margin-left: 5px;\n      }\n      mat-card-content[_ngcontent-%COMP%] {\n        margin-top: 15px;\n        margin: 15px 0 0;\n      }\n      span[_ngcontent-%COMP%] {\n        display: inline-block;\n        font-size: 13px;\n      }\n      mat-card-footer[_ngcontent-%COMP%] {\n        padding: 0 25px 25px;\n      }"]}),t}();function yt(t,e){1&t&&$.Nb(0,"bc-book-preview",1),2&t&&$.ic("book",e.$implicit)}var Bt=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=$.Gb({type:t,selectors:[["bc-book-preview-list"]],inputs:{books:"books"},decls:1,vars:1,consts:[[3,"book",4,"ngFor","ngForOf"],[3,"book"]],template:function(t,e){1&t&&$.uc(0,yt,1,1,"bc-book-preview",0),2&t&&$.ic("ngForOf",e.books)},styles:["[_nghost-%COMP%] {\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: center;\n      }"]}),t}(),wt=n("eHTH"),Ct=n("cSbt"),It=n("uad8");function xt(t,e){if(1&t&&($.Rb(0,"span"),$.vc(1),$.Qb()),2&t){var n=$.cc();$.Bb(1),$.wc(n.error)}}var Pt=function(){function t(){this.query="",this.searching=!1,this.error="",this.search=new $.n}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=$.Gb({type:t,selectors:[["bc-book-search"]],inputs:{query:"query",searching:"searching",error:"error"},outputs:{search:"search"},decls:9,vars:6,consts:[["matInput","","placeholder","Search for a book",3,"value","keyup"],[3,"diameter","strokeWidth"],[4,"ngIf"]],template:function(t,e){1&t&&($.Rb(0,"mat-card"),$.Rb(1,"mat-card-title"),$.vc(2,"Find a Book"),$.Qb(),$.Rb(3,"mat-card-content"),$.Rb(4,"mat-form-field"),$.Rb(5,"input",0),$.Zb("keyup",(function(t){return e.search.emit(t.target.value)})),$.Qb(),$.Qb(),$.Nb(6,"mat-spinner",1),$.Qb(),$.Rb(7,"mat-card-footer"),$.uc(8,xt,2,1,"span",2),$.Qb(),$.Qb()),2&t&&($.Bb(5),$.ic("value",e.query),$.Bb(1),$.Db("show",e.searching),$.ic("diameter",30)("strokeWidth",3),$.Bb(2),$.ic("ngIf",e.error))},directives:[at.a,at.m,at.d,wt.b,Ct.a,It.c,at.e,b.t],styles:["mat-card-title[_ngcontent-%COMP%], mat-card-content[_ngcontent-%COMP%], mat-card-footer[_ngcontent-%COMP%] {\n        display: flex;\n        justify-content: center;\n      }\n\n      mat-card-footer[_ngcontent-%COMP%] {\n        color: #ff0000;\n        padding: 5px 0;\n      }\n\n      .mat-form-field[_ngcontent-%COMP%] {\n        min-width: 300px;\n        margin-right: 10px; // Make room for the spinner\n      }\n\n      .mat-spinner[_ngcontent-%COMP%] {\n        position: relative;\n        top: 10px;\n        left: 10px;\n        visibility: hidden;\n      }\n\n      .mat-spinner.show[_ngcontent-%COMP%] {\n        visibility: visible;\n      }"]}),t}(),St=function(){function t(t){this.store=t,this.books$=t.pipe(Object(p.c)(it))}return t.prototype.ngOnInit=function(){this.store.dispatch(c.enter())},t.\u0275fac=function(e){return new(e||t)($.Mb(p.b))},t.\u0275cmp=$.Gb({type:t,selectors:[["bc-collection-page"]],decls:5,vars:3,consts:[[3,"books"]],template:function(t,e){1&t&&($.Rb(0,"mat-card"),$.Rb(1,"mat-card-title"),$.vc(2,"My Collection"),$.Qb(),$.Qb(),$.Nb(3,"bc-book-preview-list",0),$.dc(4,"async")),2&t&&($.Bb(3),$.ic("books",$.ec(4,1,e.books$)))},directives:[at.a,at.m,Bt],pipes:[b.b],styles:["mat-card-title[_ngcontent-%COMP%] {\n        display: flex;\n        justify-content: center;\n      }"],changeDetection:0}),t}(),Mt=n("t9fZ"),At=function(){function t(t){this.store=t,this.searchQuery$=t.pipe(Object(p.c)(W),Object(Mt.a)(1)),this.books$=t.pipe(Object(p.c)(et)),this.loading$=t.pipe(Object(p.c)(X)),this.error$=t.pipe(Object(p.c)(tt))}return t.prototype.search=function(t){this.store.dispatch(a.searchBooks({query:t}))},t.\u0275fac=function(e){return new(e||t)($.Mb(p.b))},t.\u0275cmp=$.Gb({type:t,selectors:[["bc-find-book-page"]],decls:6,vars:12,consts:[[3,"query","searching","error","search"],[3,"books"]],template:function(t,e){1&t&&($.Rb(0,"bc-book-search",0),$.Zb("search",(function(t){return e.search(t)})),$.dc(1,"async"),$.dc(2,"async"),$.dc(3,"async"),$.Qb(),$.Nb(4,"bc-book-preview-list",1),$.dc(5,"async")),2&t&&($.ic("query",$.ec(1,4,e.searchQuery$))("searching",$.ec(2,6,e.loading$))("error",$.ec(3,8,e.error$)),$.Bb(4),$.ic("books",$.ec(5,10,e.books$)))},directives:[Pt,Bt],pipes:[b.b],encapsulation:2,changeDetection:0}),t}(),Rt=function(){function t(t){this.store=t,this.book$=t.pipe(Object(p.c)(H)),this.isSelectedBookInCollection$=t.pipe(Object(p.c)(ct))}return t.prototype.addToCollection=function(t){this.store.dispatch(u.addBook({book:t}))},t.prototype.removeFromCollection=function(t){this.store.dispatch(u.removeBook({book:t}))},t.\u0275fac=function(e){return new(e||t)($.Mb(p.b))},t.\u0275cmp=$.Gb({type:t,selectors:[["bc-selected-book-page"]],decls:3,vars:6,consts:[[3,"book","inCollection","add","remove"]],template:function(t,e){1&t&&($.Rb(0,"bc-book-detail",0),$.Zb("add",(function(t){return e.addToCollection(t)}))("remove",(function(t){return e.removeFromCollection(t)})),$.dc(1,"async"),$.dc(2,"async"),$.Qb()),2&t&&$.ic("book",$.ec(1,2,e.book$))("inCollection",$.ec(2,4,e.isSelectedBookInCollection$))},directives:[mt],pipes:[b.b],encapsulation:2,changeDetection:0}),t}(),Ft=n("67Y/"),Nt=function(){function t(t,e){this.actionsSubscription=e.params.pipe(Object(Ft.a)((function(t){return s.selectBook({id:t.id})}))).subscribe((function(e){return t.dispatch(e)}))}return t.prototype.ngOnDestroy=function(){this.actionsSubscription.unsubscribe()},t.\u0275fac=function(e){return new(e||t)($.Mb(p.b),$.Mb(d.a))},t.\u0275cmp=$.Gb({type:t,selectors:[["bc-view-book-page"]],decls:1,vars:0,template:function(t,e){1&t&&$.Nb(0,"bc-selected-book-page")},encapsulation:2,changeDetection:0}),t}(),Qt=n("F/XL"),_t=n("VnD/"),$t=n("xMyE"),Et=n("9Z1F"),Tt=n("15JJ"),qt=n("XlPw"),Gt=new $.q("example-app-local-storage",{factory:function(){return void 0===typeof window||void 0===typeof localStorage?null:localStorage}}),Lt=function(){function t(t){this.storage=t,this.collectionKey="books-app"}return t.prototype.supported=function(){return null!==this.storage?Object(Qt.a)(!0):Object(qt.a)("Local Storage Not Supported")},t.prototype.getCollection=function(){var t=this;return this.supported().pipe(Object(Ft.a)((function(e){return t.storage.getItem(t.collectionKey)})),Object(Ft.a)((function(t){return t?JSON.parse(t):[]})))},t.prototype.addToCollection=function(t){var e=this;return this.getCollection().pipe(Object(Ft.a)((function(e){return Object(R.d)(e,t)})),Object($t.a)((function(t){return e.storage.setItem(e.collectionKey,JSON.stringify(t))})))},t.prototype.removeFromCollection=function(t){var e=this;return this.getCollection().pipe(Object(Ft.a)((function(e){return e.filter((function(e){return!t.includes(e.id)}))})),Object($t.a)((function(t){return e.storage.setItem(e.collectionKey,JSON.stringify(t))})))},t.prototype.deleteCollection=function(){var t=this;return this.supported().pipe(Object($t.a)((function(){return t.storage.removeItem(t.collectionKey)})))},t.\u0275fac=function(e){return new(e||t)($.Vb(Gt))},t.\u0275prov=$.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Vt=n("cUzu"),Jt=function(){function t(t){this.http=t,this.API_PATH="https://www.googleapis.com/books/v1/volumes"}return t.prototype.searchBooks=function(t){return this.http.get(this.API_PATH+"?orderBy=newest&q="+t).pipe(Object(Ft.a)((function(t){return t.items||[]})))},t.prototype.retrieveBook=function(t){return this.http.get(this.API_PATH+"/"+t)},t.\u0275fac=function(e){return new(e||t)($.Vb(Vt.a))},t.\u0275prov=$.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Dt=[{path:"find",component:At,data:{title:"Find book"}},{path:":id",component:Nt,canActivate:[function(){function t(t,e,n){this.store=t,this.googleBooks=e,this.router=n}return t.prototype.waitForCollectionToLoad=function(){return this.store.pipe(Object(p.c)(ot),Object(_t.a)((function(t){return t})),Object(Mt.a)(1))},t.prototype.hasBookInStore=function(t){return this.store.pipe(Object(p.c)(z),Object(Ft.a)((function(e){return!!e[t]})),Object(Mt.a)(1))},t.prototype.hasBookInApi=function(t){var e=this;return this.googleBooks.retrieveBook(t).pipe(Object(Ft.a)((function(t){return o.loadBook({book:t})})),Object($t.a)((function(t){return e.store.dispatch(t)})),Object(Ft.a)((function(t){return!!t})),Object(Et.a)((function(){return e.router.navigate(["/404"]),Object(Qt.a)(!1)})))},t.prototype.hasBook=function(t){var e=this;return this.hasBookInStore(t).pipe(Object(Tt.a)((function(n){return n?Object(Qt.a)(n):e.hasBookInApi(t)})))},t.prototype.canActivate=function(t){var e=this;return this.waitForCollectionToLoad().pipe(Object(Tt.a)((function(){return e.hasBook(t.params.id)})))},t.\u0275fac=function(e){return new(e||t)($.Vb(p.b),$.Vb(Jt),$.Vb(d.f))},t.\u0275prov=$.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()],data:{title:"Book details"}},{path:"",component:St,data:{title:"Collection"}}],Zt=function(){function t(){}return t.\u0275mod=$.Kb({type:t}),t.\u0275inj=$.Jb({factory:function(e){return new(e||t)},imports:[[d.j.forChild(Dt)],d.j]}),t}(),Kt=n("RRSu"),zt=n("fuZ8"),Ht=n("T1DM"),Yt=n("G5J1"),Ut=n("Gi3i"),Wt=n("0mNj"),Xt=n("ny24"),te=function(){function t(t,e){var n=this;this.actions$=t,this.googleBooks=e,this.search$=Object(Kt.a)((function(){return function(t){var e=void 0===t?{}:t,o=e.debounce,i=void 0===o?300:o,c=e.scheduler,u=void 0===c?Ht.a:c;return n.actions$.pipe(Object(zt.b)(a.searchBooks),Object(Ut.a)(i,u),Object(Tt.a)((function(t){var e=t.query;if(""===e)return Yt.a;var o=n.actions$.pipe(Object(zt.b)(a.searchBooks),Object(Wt.a)(1));return n.googleBooks.searchBooks(e).pipe(Object(Xt.a)(o),Object(Ft.a)((function(t){return r.searchSuccess({books:t})})),Object(Et.a)((function(t){return Object(Qt.a)(r.searchFailure({errorMsg:t.message}))})))})))}}))}return t.\u0275fac=function(e){return new(e||t)($.Vb(zt.a),$.Vb(Jt))},t.\u0275prov=$.Ib({token:t,factory:t.\u0275fac}),t}(),ee=n("lYZG"),ne=n("psW0"),oe=function(){function t(t,e){var n=this;this.actions$=t,this.storageService=e,this.checkStorageSupport$=Object(Kt.a)((function(){return Object(ee.a)((function(){return n.storageService.supported()}))}),{dispatch:!1}),this.loadCollection$=Object(Kt.a)((function(){return n.actions$.pipe(Object(zt.b)(c.enter),Object(Tt.a)((function(){return n.storageService.getCollection().pipe(Object(Ft.a)((function(t){return i.loadBooksSuccess({books:t})})),Object(Et.a)((function(t){return Object(Qt.a)(i.loadBooksFailure({error:t}))})))})))})),this.addBookToCollection$=Object(Kt.a)((function(){return n.actions$.pipe(Object(zt.b)(u.addBook),Object(ne.a)((function(t){var e=t.book;return n.storageService.addToCollection([e]).pipe(Object(Ft.a)((function(){return i.addBookSuccess({book:e})})),Object(Et.a)((function(){return Object(Qt.a)(i.addBookFailure({book:e}))})))})))})),this.removeBookFromCollection$=Object(Kt.a)((function(){return n.actions$.pipe(Object(zt.b)(u.removeBook),Object(ne.a)((function(t){var e=t.book;return n.storageService.removeFromCollection([e.id]).pipe(Object(Ft.a)((function(){return i.removeBookSuccess({book:e})})),Object(Et.a)((function(){return Object(Qt.a)(i.removeBookFailure({book:e}))})))})))}))}return t.\u0275fac=function(e){return new(e||t)($.Vb(zt.a),$.Vb(Lt))},t.\u0275prov=$.Ib({token:t,factory:t.\u0275fac}),t}(),re=n("X962"),ie=function(){function t(){}return t.prototype.transform=function(t,e){void 0===e&&(e=250);var n=t.replace(/(<([^>]+)>)/gi,"");return t.length>=e?n.slice(0,e)+"...":n},t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=$.Lb({name:"bcEllipsis",type:t,pure:!0}),t}(),ce=function(){function t(){}return t.\u0275mod=$.Kb({type:t}),t.\u0275inj=$.Jb({factory:function(e){return new(e||t)}}),t}(),ae=n("hc/R"),ue=n("CCO+"),se=n("p+mS"),be=n("xJ+t"),le=n("MqYC"),fe=n("XIAg"),de=n("GsDI"),pe=n("FfOm"),he=n("ea4N");n.d(e,"COMPONENTS",(function(){return me})),n.d(e,"CONTAINERS",(function(){return ge})),n.d(e,"BooksModule",(function(){return Oe}));var me=[bt,mt,jt,Bt,Pt],ge=[At,Nt,Rt,St],Oe=function(){function t(){}return t.\u0275mod=$.Kb({type:t}),t.\u0275inj=$.Jb({factory:function(e){return new(e||t)},imports:[[b.c,re.a,Zt,f.b.forFeature("books",J),l.a.forFeature([te,oe]),ce]]}),t}();$.pc(mt,[b.q,b.r,b.s,b.t,b.A,b.w,b.x,b.y,b.z,b.u,b.v,ae.b,ae.c,wt.a,wt.b,wt.e,wt.f,wt.g,wt.h,wt.i,Ct.a,Ct.c,at.a,at.f,at.n,at.d,at.m,at.l,at.b,at.e,at.k,at.i,at.h,at.g,at.o,at.c,ue.b,se.b,se.a,be.a,be.b,be.c,be.d,be.e,be.f,ut.a,ut.h,ut.d,ut.b,le.d,ut.c,ut.g,le.f,ut.i,ut.f,fe.a,de.a,pe.a,pe.c,It.a,It.c,he.d,he.c,he.g,he.e,he.b,d.k,d.g,d.i,d.h,d.m,bt,mt,jt,Bt,Pt,At,Nt,Rt,St],[b.b,b.G,b.p,b.k,b.E,b.g,b.C,b.F,b.d,b.f,b.i,b.j,b.l,st,ie]),$.pc(jt,[b.q,b.r,b.s,b.t,b.A,b.w,b.x,b.y,b.z,b.u,b.v,ae.b,ae.c,wt.a,wt.b,wt.e,wt.f,wt.g,wt.h,wt.i,Ct.a,Ct.c,at.a,at.f,at.n,at.d,at.m,at.l,at.b,at.e,at.k,at.i,at.h,at.g,at.o,at.c,ue.b,se.b,se.a,be.a,be.b,be.c,be.d,be.e,be.f,ut.a,ut.h,ut.d,ut.b,le.d,ut.c,ut.g,le.f,ut.i,ut.f,fe.a,de.a,pe.a,pe.c,It.a,It.c,he.d,he.c,he.g,he.e,he.b,d.k,d.g,d.i,d.h,d.m,bt,mt,jt,Bt,Pt,At,Nt,Rt,St],[b.b,b.G,b.p,b.k,b.E,b.g,b.C,b.F,b.d,b.f,b.i,b.j,b.l,st,ie]),$.pc(Bt,[b.q,b.r,b.s,b.t,b.A,b.w,b.x,b.y,b.z,b.u,b.v,ae.b,ae.c,wt.a,wt.b,wt.e,wt.f,wt.g,wt.h,wt.i,Ct.a,Ct.c,at.a,at.f,at.n,at.d,at.m,at.l,at.b,at.e,at.k,at.i,at.h,at.g,at.o,at.c,ue.b,se.b,se.a,be.a,be.b,be.c,be.d,be.e,be.f,ut.a,ut.h,ut.d,ut.b,le.d,ut.c,ut.g,le.f,ut.i,ut.f,fe.a,de.a,pe.a,pe.c,It.a,It.c,he.d,he.c,he.g,he.e,he.b,d.k,d.g,d.i,d.h,d.m,bt,mt,jt,Bt,Pt,At,Nt,Rt,St],[b.b,b.G,b.p,b.k,b.E,b.g,b.C,b.F,b.d,b.f,b.i,b.j,b.l,st,ie]),$.pc(Nt,[b.q,b.r,b.s,b.t,b.A,b.w,b.x,b.y,b.z,b.u,b.v,ae.b,ae.c,wt.a,wt.b,wt.e,wt.f,wt.g,wt.h,wt.i,Ct.a,Ct.c,at.a,at.f,at.n,at.d,at.m,at.l,at.b,at.e,at.k,at.i,at.h,at.g,at.o,at.c,ue.b,se.b,se.a,be.a,be.b,be.c,be.d,be.e,be.f,ut.a,ut.h,ut.d,ut.b,le.d,ut.c,ut.g,le.f,ut.i,ut.f,fe.a,de.a,pe.a,pe.c,It.a,It.c,he.d,he.c,he.g,he.e,he.b,d.k,d.g,d.i,d.h,d.m,bt,mt,jt,Bt,Pt,At,Nt,Rt,St],[b.b,b.G,b.p,b.k,b.E,b.g,b.C,b.F,b.d,b.f,b.i,b.j,b.l,st,ie])}}]);